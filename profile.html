<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil - Timesheet App</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f7fa; padding: 20px; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .back-btn { background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 5px; cursor: pointer; float: left; }
        .profile-card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .avatar { width: 80px; height: 80px; border-radius: 50%; background: #667eea; color: white; display: flex; align-items: center; justify-content: center; font-size: 30px; margin: 0 auto 20px; }
        .stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; }
        .stat { background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; }
        .stat-number { font-size: 24px; font-weight: bold; color: #667eea; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn-primary { background: #667eea; color: white; }
        .btn-danger { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="goBack()">‚Üê</button>
        <h1>üë§ Profil Utilisateur</h1>
    </div>

    <div class="profile-card">
        <div class="avatar" id="avatar">üë§</div>
        <h2 id="userName">Chargement...</h2>
        <p id="userEmail">email@exemple.com</p>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="totalScans">0</div>
                <div>Scans totaux</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="todayScans">0</div>
                <div>Aujourd'hui</div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <button class="btn btn-primary" onclick="editProfile()">‚úèÔ∏è Modifier</button>
            <button class="btn btn-danger" onclick="logout()">üö™ D√©connexion</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const token = localStorage.getItem('token');

            if (!token || !user.id) {
                window.location.href = 'login.html';
                return;
            }

            // Afficher les infos utilisateur
            document.getElementById('userName').textContent = user.displayName || user.name || 'Utilisateur';
            document.getElementById('userEmail').textContent = user.email || 'email@exemple.com';
            
            // Initiales pour l'avatar
            const initials = (user.displayName || user.name || 'U').split(' ').map(n => n[0]).join('').toUpperCase();
            document.getElementById('avatar').textContent = initials || 'üë§';
            
            // Statistiques simul√©es
            document.getElementById('totalScans').textContent = Math.floor(Math.random() * 100) + 50;
            document.getElementById('todayScans').textContent = Math.floor(Math.random() * 5) + 1;
        });

        function editProfile() {
            alert('Fonctionnalit√© √† impl√©menter');
        }

        function logout() {
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        }

        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>
